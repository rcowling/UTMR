<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>UTMR 2018 Map</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.48.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.48.0/mapbox-gl.css' rel='stylesheet' />
    <!-- Compiled and minified CSS -->    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script> 
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; margin-top: 56px; z-index: -1; }
.material-icons {
    color: white;
}

nav {
    height: 56px;
    line-height: 56px;
    background-color: #000000; 
    
}

nav i, nav [class^="mdi-"], nav [class*="mdi-"], nav i.material-icons {
    height: 56px;
    line-height: 56px;
}

nav .button-collapse i {
    height: 56px;
    line-height: 56px;
}

nav .brand-logo { 
    font-size: 1.6rem;
    
}

@media only screen and (min-width: 601px){
    nav, nav .nav-wrapper i, nav a.button-collapse, nav a.button-collapse i {
        height: 56px;
        line-height: 56px;        
    }
}

@media only screen and (min-width: 601px){
   div.elevation-chart {
        margin-top: -10px;       
    }
}

.side-nav {
    z-index: 90000 !important;
}

@media only screen and (min-width: 993px){
nav a.button-collapse {
    display: block;
}
}

#awtd1520968215226 {
    padding-top: 3px;
}
        
.btn{
    position: absolute;
    top: 10px;
    left: 240px;
}     

    </style>
</head>
<body>
<nav class="default" role="navigation">
    <div class="nav-wrapper">
         
      <a href="#!" class="brand-logo center" style="font-family: 'Kalam', cursive; font-size: 30px;">
      <a href="#" data-activates="mobile-demo" class="button-collapse show-on-large"><i class="material-icons">menu</i></a> 
      <img src="logo1.png" alt="utmr logo" style="width:82px;height:82px;">
          
        <ul class="right hide-on-med-and-down">       
      </ul>
      <ul class="side-nav" id="mobile-demo">
        <li><a href="index.html">Trail Map</a></li>   
        <li><a href="weather.html">Weather</a></li>
        <li><a href="membership.html">Membership</a></li>      
          <li><a href="about.html">About</a></li>  
        <h10 style="color:black;"> TRAIL FILTERS:</h10>
        <li onclick="catSki();"><a href="#">Skiing Trails</a></li>   
        <li onclick="catBiking();"><a href="#">Snowbiking Trails</a></li>
        <li onclick="catShoe();"><a href="#">Snowshoeing Trails</a></li>
        <li onclick="allTrailsStyle();"><a href="#">All Trails</a></li>
      </ul>        
    </div>
  </nav>
        <script>
            $('.button-collapse').sideNav({
              menuWidth: 240, // Default is 240
              edge: 'left', // Choose the horizontal origin
              closeOnClick: true // Closes side-nav on <a> clicks, useful for Angular/Meteor
             }
            );
            
           
        </script>
    
<ul id="dropdown2" class="dropdown-content">
  <li onclick="fourStage(map);"><a href="#">4STAGE</a></li>
  <li onclick="hundredKmStage(map);"><a href="#">ULTRA100</a></li>
  <li onclick="allStage(map);"><a href="#">ULTRA170</a></li>    
</ul>
<a class="dropdown-button btn black" href="#!" data-activates="dropdown2">TRACKS
<i class="material-icons right">map</i>
</a>
    
<div id='map'></div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoidXRtciIsImEiOiJjams1MTFtN3Ewb3MyM3FteGNmd3h0ejh2In0.6QwIGhuiXVJRv_XOl-KhxA';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/outdoors-v9',
    zoom: 9,
	center: [7.838355,46.195098]
});
    
// Add controls to the map
// Add zoom and rotation controls to the map.
map.addControl(new mapboxgl.NavigationControl());
map.addControl(new mapboxgl.FullscreenControl());    
    
// Add geolocation control to the map.     
map.addControl(new mapboxgl.GeolocateControl({
    positionOptions: {
        enableHighAccuracy: true
    },
    trackUserLocation: true
})); 

function fourStage(map) {
    map.setLayoutProperty('4stages', 'visibility', 'visible');
    map.setLayoutProperty('allstages', 'visibility', 'none');
    //map.setLayoutProperty('100kmstages', 'visibility', 'none');
}
    
function allStage(map) {
    map.setLayoutProperty('4stages', 'visibility', 'none');
    map.setLayoutProperty('allstages', 'visibility', 'visible');
    //map.setLayoutProperty('100kmstages', 'visibility', 'none');
}    

function hundredKmStage(map) {
    map.setLayoutProperty('4stages', 'visibility', 'none');
    map.setLayoutProperty('allstages', 'visibility', 'none');
    //map.setLayoutProperty('100kmstages', 'visibility', 'visbile');
} 
    
var poiurl = 'poi.geojson';
var stagesurl = '4stage.geojson'
var allstagesurl = 'stageall.geojson'
var  hundredkmurl = '' // the filename for your 100km track goes here

map.on('load', function () {    
    map.addSource('poi', { type: 'geojson', data: poiurl });
    map.addLayer({
        "id": "poi",
        "type": "symbol",        
        "source": "poi",
        "layout": {
            "icon-image": "rocket-15",
            "visibility": "visible"
        }
    });
    
    map.addSource('4stage', { type: 'geojson', data: stagesurl });
    map.addLayer({
        "id": "4stages",
        "type": "line",
        "source": "4stage",
       'layout': {
            'visibility': 'visible'
        },
        paint: {
            'line-color': {
                 property: 'track',
                 type: 'categorical',                
                 stops: [
                 [1, 'blue'],
                 [2, 'yellow'],
                 [3, 'red'],
                 [4, 'green']     
                 ]
                },
            'line-width': 3           
        }
    });
    
    map.addSource('allstage', { type: 'geojson', data: allstagesurl });
    map.addLayer({
        "id": "allstages",
        "type": "line",
        "source": "allstage",
       'layout': {
            'visibility': 'none'
        },
        paint: {
            'line-color': '#CC2160',
            'line-width': 3            
        }
    });
    
    /*// This is for the missing 100km stage. Simply add the file path to the variable declared above. 
    map.addSource('100kmstage', { type: 'geojson', data: hundredkmurl });
    map.addLayer({
        "id": "100kmstages",
        "type": "line",
        "source": "100kmstage",
       'layout': {
            'visibility': 'none'
        },
        paint: {
            'line-color': 'red',
            'line-width': 6.15,
            'line-opacity': .5
        }
    });*/
});
</script>

</body>
</html>